import { settings } from './settings';
import { writable, get } from 'svelte/store';

// 邱梓钿：修改提示功能为切换展示候选值个数
export const numHintCandidate = writable(0);

function createHints() {

	const maxHintCandidate = writable(0);

	settings.subscribe(($settings) => {
		maxHintCandidate.set($settings.maxHintCandidate);
	});

	return {
		subscribe: maxHintCandidate.subscribe,

		switchHint(reverse = false) {
			numHintCandidate.update($numHintCandidate => {
				if (reverse) {
					if ($numHintCandidate == 0) {
						return get(maxHintCandidate);
					}
					return $numHintCandidate - 1;
				}
				if ($numHintCandidate == get(maxHintCandidate)) {
					return 0;
				}
				return $numHintCandidate + 1;
			});
			return get(numHintCandidate);
		},

		getHint() {
			return get(numHintCandidate);
		},

		reset() {
			numHintCandidate.set(0);
		}
	};
}

export const hints = createHints();